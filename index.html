<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HAM Yoga by Farmacia Q19</title>

    <!-- Librerías -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/es.js"></script>

    <!-- App Logic & Styles -->
    <link rel="stylesheet" href="css/style.css">
    <script src="js/app.js" defer></script>

    <!-- Fuentes -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        q19: { 50: '#f0f9fa', 100: '#d5eff1', 500: '#2d8a8e', 700: '#236c6f', 900: '#1a4d4f' },
                        gold: { 50: '#fffbf0', 100: '#ffefc2', 400: '#d4af37', 500: '#c5a059', 600: '#a68545' }
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Lato', 'sans-serif'],
                    },
                    backgroundImage: {
                        'hero-pattern': "url('https://images.unsplash.com/photo-1552196563-55cd4e45efb3?q=80&w=1926&auto=format&fit=crop')",
                    }
                }
            }
        };
        ;
    </script>
</head>

<body class="antialiased">

    <!-- ================= AUTH SCREEN (LANDING STYLE) ================= -->
    <div id="auth-container"
        class="min-h-screen flex items-center justify-center p-4 md:p-8 bg-hero-pattern bg-cover bg-center bg-no-repeat relative">
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-md"></div>

        <div class="max-w-6xl w-full mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 relative z-10 items-center">

            <!-- Panel Izquierdo (Branding & Info) -->
            <div class="text-white fade-in order-2 lg:order-1 text-center lg:text-left">
                <div
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 text-[10px] font-bold uppercase tracking-[0.25em] mb-6 backdrop-blur-md">
                    <i class="ph-fill ph-sparkle text-gold-400"></i>
                    Studio & Wellness
                </div>

                <h1 class="brand-font text-7xl md:text-7xl font-bold leading-tight mb-2 text-white drop-shadow-sm">
                    HAM Yoga
                </h1>
                <p class="text-xm md:text-sm uppercase tracking-[0.35em] text-gold-400 font-bold mb-6 pl-1">
                    by Farmacia Q19
                </p>

                <p class="text-gray-200 text-lg md:text-xl font-light leading-relaxed max-w-lg mx-auto lg:mx-0 mb-10">
                    Descubre tu mejor versión a través del movimiento consciente.
                    <span class="block mt-2 text-white/80 text-base">Pilates Reformer • Vinyasa • Hatha</span>
                </p>

                <div class="flex flex-wrap justify-center lg:justify-start gap-4 text-xs font-medium text-gray-200">
                    <div
                        class="flex items-center gap-2 bg-black/20 border border-white/10 px-4 py-2.5 rounded-full backdrop-blur-md">
                        <i class="ph-fill ph-calendar-check text-emerald-400 text-lg"></i>
                        <span>Reservas 24/7</span>
                    </div>
                    <div
                        class="flex items-center gap-2 bg-black/20 border border-white/10 px-4 py-2.5 rounded-full backdrop-blur-md">
                        <i class="ph-fill ph-ticket text-gold-400 text-lg"></i>
                        <span>Bonos Flexibles</span>
                    </div>
                </div>
            </div>

            <!-- Panel Derecho (Forms) -->
            <div class="w-full max-w-md mx-auto order-1 lg:order-2 fade-in" style="animation-delay: 0.2s;">

                <!-- LOGIN FORM -->
                <div id="login-card"
                    class="bg-white/95 backdrop-blur-xl p-8 md:p-10 rounded-3xl shadow-2xl border-t-4 border-q19-700 relative overflow-hidden">
                    <div class="text-center mb-8 relative z-10">
                        <h2 class="text-3xl font-bold text-gray-900 brand-font">Bienvenido</h2>
                        <p class="text-gray-500 mt-2 text-xs font-bold uppercase tracking-[0.2em]">Accede a tu cuenta
                        </p>
                    </div>
                    <form id="form-login" class="space-y-5 relative z-10">
                        <div class="group">
                            <label
                                class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-1.5 block">Email</label>
                            <div class="relative">
                                <i
                                    class="ph-bold ph-envelope-simple absolute left-4 top-3.5 text-gray-400 group-focus-within:text-q19-600 transition"></i>
                                <input type="email" id="login-email"
                                    class="w-full pl-11 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition placeholder-gray-400"
                                    placeholder="hola@ejemplo.com" required>
                            </div>
                        </div>
                        <div class="group">
                            <label
                                class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-1.5 block">Contraseña</label>
                            <div class="relative">
                                <i
                                    class="ph-bold ph-lock-key absolute left-4 top-3.5 text-gray-400 group-focus-within:text-q19-600 transition"></i>
                                <input type="password" id="login-password"
                                    class="w-full pl-11 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition placeholder-gray-400"
                                    placeholder="••••••••" required>
                            </div>
                        </div>
                        <button type="submit"
                            class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold hover:bg-q19-800 transition shadow-lg hover:shadow-xl transform active:scale-[0.98] tracking-wide text-sm flex items-center justify-center gap-2 group">
                            INICIAR SESIÓN <i class="ph-bold ph-arrow-right group-hover:translate-x-1 transition"></i>
                        </button>
                    </form>

                    <div class="mt-8 text-center relative z-10">
                        <p class="text-gray-400 text-sm">¿Aún no tienes cuenta?</p>
                        <button onclick="toggleAuth('register')"
                            class="text-q19-700 font-bold text-xl hover:underline mt-1">Regístrate gratis aquí</button>
                        <p class="text-[10px] text-gray-400 mt-6 font-mono tracking-widest uppercase opacity-60">v1.1.2
                        </p>
                    </div>

                    <!-- Decoración fondo card -->
                    <div
                        class="absolute -top-10 -right-10 w-32 h-32 bg-q19-50 rounded-full blur-3xl opacity-50 pointer-events-none">
                    </div>
                    <div
                        class="absolute -bottom-10 -left-10 w-32 h-32 bg-gold-50 rounded-full blur-3xl opacity-50 pointer-events-none">
                    </div>
                </div>

                <!-- REGISTER FORM -->
                <div id="register-card"
                    class="bg-white/95 backdrop-blur-xl p-8 md:p-10 rounded-3xl shadow-2xl border-t-4 border-gold-500 hidden relative">
                    <div class="text-center mb-8">
                        <h2 class="text-2xl font-bold text-gray-900 brand-font">Crear Cuenta</h2>
                        <p class="text-gray-500 text-xs font-bold uppercase tracking-[0.2em] mt-2">Únete a la comunidad
                        </p>
                    </div>
                    <form id="form-register" class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Nombre</label>
                                <input type="text" id="reg-nombre"
                                    class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-gold-500 transition"
                                    placeholder="Nombre" required>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Apellidos</label>
                                <input type="text" id="reg-apellidos"
                                    class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-gold-500 transition"
                                    placeholder="Apellidos" required>
                            </div>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Email</label>
                            <input type="email" id="reg-email"
                                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-gold-500 transition"
                                placeholder="tu@email.com" required>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Contraseña</label>
                            <input type="password" id="reg-password"
                                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-gold-500 transition"
                                placeholder="Contraseña segura" required>
                        </div>
                        <button type="submit"
                            class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold hover:bg-black transition shadow-lg transform active:scale-[0.98] tracking-wide text-sm">CREAR
                            CUENTA</button>
                    </form>
                    <div class="mt-6 text-center">
                        <button onclick="toggleAuth('login')"
                            class="text-gray-500 font-medium text-sm hover:text-gray-800 transition">← Volver a Iniciar
                            Sesión</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- ================= APP PRINCIPAL ================= -->
    <div id="app-view" class="hidden min-h-screen flex flex-col bg-[#fafaf9]">

        <!-- HEADER -->
        <header class="bg-white/90 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">
                <!-- LOGO BRANDING -->
                <div class="flex items-center gap-3 group cursor-default">
                    <div
                        class="w-11 h-11 bg-gradient-to-br from-q19-800 to-q19-600 rounded-full flex items-center justify-center text-grey shadow-lg group-hover:scale-105 transition duration-300">
                        <span class="brand-font font-bold text-3xl pb-1 italic">H</span>
                    </div>
                    <a href="https://maps.google.com/?q=Farmacia+Q19+Albacete"
                        class="flex flex-col hover:opacity-80 transition-opacity">
                        <h1 class="brand-font font-bold text-3xl text-gray-900 leading-none tracking-tight">
                            HAM Yoga
                        </h1>
                        <span class="text-[12px] tracking-[0.25em] text-gold-600 uppercase font-bold mt-0.5">
                            by Farmacia Q19
                        </span>
                    </a>
                </div>

                <!-- MENU DERECHA -->
                <div class="flex items-center gap-4 sm:gap-8">
                    <!-- CONTADOR DE BONOS -->
                    <div class="flex flex-col items-end">
                        <span class="text-[9px] text-gray-400 font-bold uppercase tracking-widest mb-0.5">Mis
                            Bonos</span>
                        <div
                            class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-full border border-gray-200 shadow-sm hover:border-gold-300 transition cursor-default">
                            <i class="ph-fill ph-ticket text-gold-500 text-lg"></i>
                            <span id="bonos-count" class="font-bold text-gray-800 text-lg leading-none">0</span>
                        </div>
                    </div>

                    <!-- ENLACES RÁPIDOS FARMACIA / INSTAGRAM (solo desktop) -->
                    <div class="hidden md:flex items-center gap-2 text-[11px] font-medium text-gray-500">
                        <a href="https://maps.google.com/?q=Farmacia+Q19+Albacete" target="_blank"
                            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white border border-gray-200 shadow-sm hover:border-q19-500 hover:text-q19-700 hover:shadow-md transition">
                            <i class="ph-fill ph-shopping-bag text-q19-600 text-sm"></i>
                            <span>Farmacia Q19</span>
                        </a>
                        <a href="https://www.instagram.com/farmaciaq19/" target="_blank"
                            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white border border-gray-200 shadow-sm hover:border-pink-500 hover:text-pink-600 hover:shadow-md transition">
                            <i class="ph-fill ph-instagram-logo text-pink-500 text-sm"></i>
                            <span>@farmaciaq19</span>
                        </a>
                    </div>

                    <div class="h-8 w-px bg-gray-200 hidden sm:block"></div>

                    <!-- Botón logout -->
                    <button onclick="logout()"
                        class="text-gray-400 hover:text-red-500 transition p-2.5 hover:bg-red-50 rounded-full group"
                        title="Cerrar Sesión">
                        <i class="ph-bold ph-sign-out text-xl group-hover:-translate-x-0.5 transition"></i>
                    </button>
                </div>
            </div>

            <!-- BARRA ADMIN -->
            <div class="admin-only hidden w-full bg-gray-900 text-white text-xm font-medium shadow-inner">
                <div class="max-w-7xl mx-auto flex">
                    <button onclick="switchTab('horarios')" id="tab-horarios"
                        class="px-7 py-4 border-b-2 border-gold-500 bg-gray-800 flex items-center gap-2 transition hover:bg-gray-800">
                        <i class="ph-bold ph-calendar-check text-gold-400"></i> Gestión Reservas
                    </button>
                    <button onclick="switchTab('admin-profesores')" id="tab-admin-profesores"
                        class="px-7 py-4 border-b-2 border-transparent text-gray-400 hover:text-white hover:bg-gray-800 transition flex items-center gap-2">
                        <i class="ph-bold ph-user-list text-gold-400"></i> Profesores
                    </button>
                    <button onclick="switchTab('asistencias')" id="tab-asistencias"
                        class="px-7 py-4 border-b-2 border-transparent text-gray-400 hover:text-white hover:bg-gray-800 transition flex items-center gap-2">
                        <i class="ph-bold ph-list-checks text-gold-400"></i> Alumnos por clase
                    </button>
                    <button onclick="switchTab('usuarios')" id="tab-usuarios"
                        class="px-7 py-4 border-b-2 border-transparent text-gray-400 hover:text-white hover:bg-gray-800 transition flex items-center gap-2">
                        <i class="ph-bold ph-users-three text-gold-400"></i> Usuarios y Bonos
                    </button>
                    <button onclick="switchTab('configuracion')" id="tab-configuracion"
                        class="px-7 py-4 border-b-2 border-transparent text-gray-400 hover:text-white hover:bg-gray-800 transition flex items-center gap-2">
                        <i class="ph-bold ph-gear text-gold-400"></i> Configuración
                    </button>
                </div>
            </div>

        </header>

        <main class="flex-grow max-w-7xl mx-auto px-4 py-8 md:py-12 w-full">

            <!-- VISTA HORARIOS -->
            <div id="view-horarios" class="fade-in">

                <!-- Banner Bienvenida / Header Sección -->
                <div
                    class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-6 pb-6 border-b border-gray-200">
                    <!-- IZQUIERDA: título -->
                    <div class="flex-1">
                        <span
                            class="inline-block py-1 px-3 rounded-full bg-gold-50 text-gold-700 font-bold tracking-widest text-[10px] uppercase mb-3 border border-gold-100">
                            Calendario Semanal
                        </span>
                        <h2 class="text-4xl md:text-5xl brand-font font-bold text-gray-900 mb-3">Reserva tu práctica
                        </h2>
                        <p class="text-gray-500 font-light text-lg max-w-xl leading-relaxed">
                            Encuentra el equilibrio perfecto entre cuerpo y mente. Selecciona tu clase y prepárate
                            para desconectar.
                        </p>
                    </div>

                    <!-- DERECHA: Ficha compacta + botón admin -->
                    <div class="w-full md:w-auto flex flex-col md:items-end gap-3">

                        <!-- FICHA CLIENTE COMPACTA -->
                        <!-- FICHA CLIENTE AVANZADA V5 -->
                        <div id="profile-card"
                            class="glass-panel rounded-3xl p-4 pr-6 border border-white/60 shadow-lg hidden flex items-start gap-5 bg-white/70 backdrop-blur-xl max-w-lg relative group transition-all hover:bg-white/80">

                            <!-- BADGE RANGO (Grande: w-28 = 7rem) -->
                            <div
                                class="relative w-28 h-28 shrink-0 flex items-center justify-center -ml-2 filter drop-shadow-lg">
                                <img id="rank-badge" src="" alt="Rango"
                                    class="w-full h-full object-contain transition transform group-hover:scale-105 rounded-2xl"
                                    onerror="this.style.display='none'">
                            </div>

                            <!-- Datos + Progreso -->
                            <div class="flex flex-col justify-center w-full pt-1">

                                <!-- Header: Nombre + Gear -->
                                <div class="flex justify-between items-start w-full mb-1">
                                    <div>
                                        <div class="flex items-center gap-2">
                                            <!-- Usamos un span único para nombre completo ahora para facilitar diseño -->
                                            <span id="profile-nombre-full"
                                                class="font-bold text-gray-900 text-xl leading-tight font-serif"></span>
                                            <button onclick="abrirEditarPerfil()"
                                                class="text-gray-300 hover:text-gold-500 transition p-1 rounded-full hover:bg-gold-50"
                                                title="Editar Nombre">
                                                <i class="ph-bold ph-gear text-sm"></i>
                                            </button>
                                        </div>
                                        <div class="flex items-center gap-2 mt-0.5">
                                            <span class="text-xs font-black uppercase tracking-widest text-gold-600"
                                                id="rank-name">BRONCE</span>
                                            <span id="discount-badge"
                                                class="hidden text-[10px] font-bold text-white bg-emerald-500 px-2 py-0.5 rounded-full shadow-sm">
                                                -5%
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Clases mes actual -->
                                    <div class="text-right leading-none">
                                        <span class="block text-2xl font-bold text-gray-800"
                                            id="clases-count-num">0</span>
                                        <span class="text-[9px] font-bold text-gray-400 uppercase tracking-wide">Clases
                                            Mes</span>
                                    </div>
                                </div>

                                <!-- Barra de Progreso -->
                                <div class="mt-3 w-full">
                                    <div
                                        class="flex justify-between text-[10px] font-bold text-gray-400 mb-1 uppercase tracking-wider">
                                        <span id="progress-text" class="text-gray-400">Progreso nivel</span>
                                        <span id="next-level-info" class="text-q19-600 font-bold">Calculando...</span>
                                    </div>
                                    <div class="h-2.5 w-full bg-gray-200 rounded-full overflow-hidden shadow-inner">
                                        <div id="rank-progress-bar"
                                            class="h-full bg-gradient-to-r from-emerald-400 to-emerald-600 rounded-full transition-all duration-1000 ease-out"
                                            style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="admin-only">
                            <button onclick="abrirModalCrearClase()"
                                class="flex bg-q19-700 hover:bg-q19-800 text-white px-5 py-2.5 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 transition items-center gap-2">
                                <i class="ph-bold ph-plus-circle text-lg"></i>
                                Crear Clase
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Alerta Sin Bonos -->
                <div id="no-bonos-alert"
                    class="hidden mb-10 bg-orange-50/80 backdrop-blur-sm border border-orange-100 p-5 rounded-2xl flex flex-col sm:flex-row justify-between items-center gap-4 shadow-sm animate-pulse">
                    <div class="flex items-center gap-4">
                        <div class="bg-white p-2.5 rounded-full text-orange-500 shadow-sm">
                            <i class="ph-fill ph-warning-circle text-2xl"></i>
                        </div>
                        <div>
                            <p class="font-bold text-orange-900 text-lg">Saldo agotado</p>
                            <p class="text-sm text-orange-800/80">Recarga tus bonos en la farmacia para seguir
                                reservando.</p>
                        </div>
                    </div>
                    <a href="https://maps.google.com/?q=Farmacia+Q19+Albacete" target="_blank"
                        class="text-xs bg-white text-orange-800 px-5 py-2.5 rounded-xl border border-orange-200 font-bold hover:bg-orange-50 hover:border-orange-300 transition uppercase tracking-wide shadow-sm">
                        Cómo llegar
                    </a>
                </div>

                <!-- LAYOUT: CLASES (IZQUIERDA) + CALENDARIO (DERECHA) -->
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

                    <!-- CLASES (IZQUIERDA) -->
                    <div class="lg:col-span-8">
                        <div id="schedule-container" class="space-y-6"></div>

                        <!-- Empty State -->
                        <div id="empty-state"
                            class="hidden flex flex-col items-center justify-center py-24 text-center">
                            <div class="bg-white p-8 rounded-full mb-6 shadow-sm border border-gray-100">
                                <i class="ph-duotone ph-calendar-slash text-5xl text-gray-300"></i>
                            </div>
                            <h3 class="brand-font text-2xl font-bold text-gray-800 mb-2">No hay clases disponibles
                            </h3>
                            <p class="text-gray-500 text-sm font-light max-w-xs mx-auto">
                                Estamos planificando la próxima semana. Vuelve a consultar en breve.
                            </p>
                        </div>
                    </div>

                    <!-- CALENDARIO (DERECHA) -->
                    <div class="lg:col-span-4">
                        <div class="sticky top-24">
                            <div class="bg-white rounded-3xl shadow-lg border border-gray-100 p-6">
                                <!-- Header Calendario -->
                                <div class="flex items-center justify-between mb-6">
                                    <button onclick="cambiarMes(-1)"
                                        class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 transition text-gray-600">
                                        <i class="ph-bold ph-caret-left text-lg"></i>
                                    </button>

                                    <div class="text-center">
                                        <h3 id="calendar-month-year" class="brand-font text-xl font-bold text-gray-900">
                                        </h3>
                                        <p class="text-xs text-gray-400 uppercase tracking-wider mt-0.5">Selecciona
                                            un día</p>
                                    </div>

                                    <button onclick="cambiarMes(1)"
                                        class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 transition text-gray-600">
                                        <i class="ph-bold ph-caret-right text-lg"></i>
                                    </button>
                                </div>

                                <!-- Días de la Semana -->
                                <div class="grid grid-cols-7 gap-1 mb-2">
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">L</div>
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">M</div>
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">X</div>
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">J</div>
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">V</div>
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">S</div>
                                    <div class="text-center text-xs font-bold text-gray-400 py-2">D</div>
                                </div>

                                <!-- Grid Días -->
                                <div id="calendar-grid" class="grid grid-cols-7 gap-1"></div>

                                <!-- Botón Limpiar Filtro -->
                                <button onclick="limpiarFiltroFecha()"
                                    class="mt-6 w-full bg-gray-100 text-gray-600 py-3 rounded-xl text-sm font-bold hover:bg-gray-200 transition flex items-center justify-center gap-2">
                                    <i class="ph-bold ph-x-circle"></i>
                                    Ver todas las clases
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- VISTA ASISTENCIAS (Alumnos por clase) -->
            <div id="view-asistencias" class="hidden fade-in">
                <div class="flex flex-col md:flex-row justify-between items-start mb-8 gap-4">
                    <div>
                        <h2 class="text-3xl brand-font font-bold text-gray-900">Alumnos por clase</h2>
                        <p class="text-gray-500 mt-1">Revisa qué alumnos están apuntados en cada sesión.</p>
                    </div>
                </div>

                <div id="asistencias-container" class="space-y-6">
                    <!-- JS rellena aquí las clases con sus alumnos -->
                </div>

                <div id="asistencias-empty"
                    class="hidden bg-white rounded-2xl p-12 text-center border border-gray-100 mt-4">
                    <i class="ph-duotone ph-users text-5xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500 font-medium">No hay clases registradas o reservas aún.</p>
                </div>
            </div>

            <!-- VISTA USUARIOS (Admin) -->
            <div id="view-usuarios" class="hidden fade-in">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                    <div>
                        <h2 class="text-3xl brand-font font-bold text-gray-900">Cartera de Clientes</h2>
                        <p class="text-gray-500 mt-1">Gestión manual de bonos y accesos.</p>
                    </div>
                    <div class="relative w-full md:w-80 group">
                        <i
                            class="ph-bold ph-magnifying-glass absolute left-4 top-3.5 text-gray-400 group-focus-within:text-q19-500 transition"></i>
                        <input type="text" id="user-search" onkeyup="filtrarUsuarios()"
                            class="w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 outline-none shadow-sm transition placeholder-gray-400"
                            placeholder="Buscar email...">
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                    <table class="w-full text-left border-collapse">
                        <thead
                            class="bg-gray-50 border-b border-gray-100 text-[10px] uppercase text-gray-500 font-bold tracking-wider">
                            <tr>
                                <th class="px-6 py-4">Usuario</th>
                                <th class="px-6 py-4 text-center">Rol</th>
                                <th class="px-6 py-4 text-center">Saldo</th>
                                <th class="px-6 py-4 text-right">Añadir / Quitar</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body" class="divide-y divide-gray-50 text-sm text-gray-600">
                            <!-- JS Rellena esto -->
                        </tbody>
                    </table>
                    <div id="no-users-found" class="hidden p-12 text-center text-gray-400 italic">No se han
                        encontrado resultados.</div>
                </div>
            </div>

            <!-- VISTA ADMIN PROFESORES -->
            <div id="view-admin-profesores" class="hidden fade-in">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                    <div>
                        <h2 class="text-3xl brand-font font-bold text-gray-900">Gestión de Profesores</h2>
                        <p class="text-gray-500 mt-1">Administra el equipo docente. Nombres, especialidades y fotos.
                        </p>
                    </div>
                    <button onclick="nuevoProfesor()"
                        class="flex bg-q19-700 hover:bg-q19-800 text-white px-5 py-2.5 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 transition items-center gap-2">
                        <i class="ph-bold ph-plus-circle text-lg"></i> Nuevo Profesor
                    </button>
                </div>

                <!-- Grid de Profesores "Estéticamente Bonito" -->
                <div id="admin-profesores-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- JS Rellena -->
                </div>
                <div id="no-profesores"
                    class="hidden p-12 text-center text-gray-400 italic bg-white rounded-2xl border border-gray-100">
                    No hay profesores registrados.
                </div>
            </div>

            <!-- VISTA CONFIGURACIÓN (Admin) -->
            <div id="view-configuracion" class="hidden fade-in">
                <div class="flex flex-col md:flex-row justify-between items-start mb-8 gap-4">
                    <div>
                        <h2 class="text-3xl brand-font font-bold text-gray-900">Configuración del Sistema</h2>
                        <p class="text-gray-500 mt-1">Gestiona los parámetros de configuración de la aplicación.</p>
                    </div>
                    <button onclick="agregarConfiguracion()"
                        class="flex items-center gap-2 bg-q19-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 transition">
                        <i class="ph-bold ph-plus-circle text-lg"></i> Nuevo Parámetro
                    </button>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
                    <table class="w-full text-left border-collapse">
                        <thead
                            class="bg-gray-50 border-b border-gray-100 text-[10px] uppercase text-gray-500 font-bold tracking-wider">
                            <tr>
                                <th class="px-6 py-4">Clave</th>
                                <th class="px-6 py-4">Valor</th>
                                <th class="px-6 py-4">Descripción</th>
                                <th class="px-6 py-4 text-center">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="config-table-body" class="divide-y divide-gray-50 text-sm text-gray-600">
                            <!-- JS Rellena esto -->
                        </tbody>
                    </table>
                    <div id="no-config-found" class="hidden p-12 text-center text-gray-400 italic">No hay
                        configuraciones disponibles.</div>
                </div>
            </div>


        </main>

        <footer class="bg-white border-t border-gray-200 py-12 mt-auto">
            <div class="max-w-6xl mx-auto px-4 text-center">
                <div
                    class="w-14 h-14 bg-gray-50 rounded-full flex items-center justify-center text-gray-400 mx-auto mb-5 border border-gray-100">
                    <span class="brand-font font-bold text-2xl pb-1 italic text-gray-300">H</span>
                </div>
                <p class="brand-font font-bold text-gray-900 text-xl mb-1">HAM Yoga</p>
                <p class="text-[10px] uppercase tracking-[0.25em] text-gold-500 font-bold mb-6">by Farmacia Q19</p>

                <p class="text-gray-400 text-sm mb-8 max-w-md mx-auto leading-relaxed">
                    Un espacio dedicado al bienestar integral, la salud física y la paz mental. <br>
                    Cuidamos de ti desde el interior.
                </p>

                <div class="flex justify-center gap-8 text-2xl text-q19-600 mb-8">
                    <!-- Instagram -->
                    <a href="https://www.instagram.com/farmaciaq19/" target="_blank"
                        class="hover:text-q19-800 hover:scale-110 transition duration-300"
                        aria-label="Instagram Farmacia Q19">
                        <i class="ph-fill ph-instagram-logo"></i>
                    </a>

                    <!-- Farmacia online -->
                    <a href="https://maps.google.com/?q=Farmacia+Q19+Albacete" target="_blank"
                        class="hover:text-q19-800 hover:scale-110 transition duration-300 inline-flex items-center gap-2 text-base"
                        aria-label="Farmacia online Q19">
                        <i class="ph-fill ph-shopping-bag text-2xl"></i>
                        <span class="text-sm font-semibold tracking-wide uppercase">Farmacia online</span>
                    </a>

                    <!-- WhatsApp (ajusta el teléfono si quieres) -->
                    <a href="https://api.whatsapp.com/send?phone=+34967511449" target="_blank"
                        class="hover:text-q19-800 hover:scale-110 transition duration-300"
                        aria-label="WhatsApp Farmacia Q19">
                        <i class="ph-fill ph-whatsapp-logo"></i>
                    </a>
                </div>
                <div
                    class="border-t border-gray-100 pt-8 mt-8 flex flex-col md:flex-row justify-center items-center gap-4 text-xs text-gray-400">
                    <span>&copy; 2025 HAM Yoga by Q19. Todos los derechos reservados.</span>
                    <span class="hidden md:inline text-gray-300">•</span>
                    <a href="#" class="hover:text-gray-600">Política de Privacidad</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- MODAL CREAR CLASE -->
    <div id="modal-crear-clase"
        class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
        <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div
                class="sticky top-0 bg-gradient-to-r from-q19-700 to-q19-600 text-white p-6 rounded-t-3xl flex justify-between items-center">
                <div>
                    <h3 class="brand-font text-2xl font-bold">Nueva Clase</h3>
                    <p class="text-white/80 text-sm mt-1">Completa los datos para crear la clase</p>
                </div>
                <button onclick="cerrarModalCrearClase()"
                    class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/20 transition">
                    <i class="ph-bold ph-x text-2xl"></i>
                </button>
            </div>

            <form id="form-crear-clase" class="p-6 space-y-5">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <!-- Nombre de la Clase -->
                    <div class="md:col-span-2">
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-2 block">Nombre
                            de la Clase</label>
                        <input type="text" id="clase-nombre" required
                            class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition"
                            placeholder="Ej: Pilates Reformer, Vinyasa Flow, Hot Yoga...">
                    </div>

                    <!-- Fecha -->
                    <div>
                        <label
                            class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-2 block">Fecha</label>
                        <input type="text" id="clase-fecha" required
                            class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition">
                    </div>

                    <!-- Hora Inicio -->
                    <div>
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-2 block">Hora
                            Inicio</label>
                        <input type="time" id="clase-hora-inicio" required
                            class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition">
                    </div>

                    <!-- Duración (minutos) -->
                    <div>
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-2 block">Duración
                            (minutos)</label>
                        <select id="clase-duracion" required
                            class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition">
                            <option value="45">45 minutos</option>
                            <option value="50" selected>50 minutos</option>
                            <option value="60">60 minutos</option>
                            <option value="75">75 minutos</option>
                            <option value="90">90 minutos</option>
                        </select>
                    </div>

                    <!-- Capacidad Máxima -->
                    <div>
                        <label class="text-xs font-bold text-gray-500 uppercase tracking-wide ml-1 mb-2 block">Capacidad
                            Máxima</label>
                        <input type="number" id="clase-capacidad" min="1" max="30" value="10" required
                            class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-q19-500 focus:border-q19-500 outline-none transition">
                    </div>
                </div>

                <div class="flex gap-3 pt-4 border-t border-gray-100">
                    <button type="button" onclick="cerrarModalCrearClase()"
                        class="flex-1 bg-gray-100 text-gray-600 py-3 rounded-xl font-bold hover:bg-gray-200 transition">
                        Cancelar
                    </button>
                    <button type="submit"
                        class="flex-1 bg-gradient-to-r from-q19-700 to-q19-600 text-white py-3 rounded-xl font-bold hover:shadow-lg transition flex items-center justify-center gap-2">
                        <i class="ph-bold ph-check-circle"></i> Crear Clase
                    </button>
                </div>
            </form>
        </div>
    </div>

</body>

</html>